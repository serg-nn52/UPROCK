(function(){"use strict";var t={1731:function(t,e,r){var o=r(9242),s=r(3396);function n(t,e,r,o,n,a){const i=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(i)}var a=(0,s.aZ)({}),i=r(89);const u=(0,i.Z)(a,[["render",n]]);var d=u,c=r(2483);function l(t,e,r,o,n,a){const i=(0,s.up)("UserInfo"),u=(0,s.up)("LayoutPage");return(0,s.wg)(),(0,s.j4)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i)])),_:1})}const p=t=>((0,s.dD)("data-v-b13cfd3a"),t=t(),(0,s.Cn)(),t),f=p((()=>(0,s._)("header",{class:"header"},"Приложение",-1))),h={class:"wrapper"},v={class:"container"},m=p((()=>(0,s._)("footer",{class:"footer"},"2022",-1)));function g(t,e,r,o,n,a){return(0,s.wg)(),(0,s.iD)(s.HY,null,[f,(0,s._)("div",h,[(0,s._)("div",v,[(0,s.WI)(t.$slots,"default",{},void 0,!0)])]),m],64)}var w=(0,s.aZ)({});const _=(0,i.Z)(w,[["render",g],["__scopeId","data-v-b13cfd3a"]]);var b=_,y=r(7139),O=r.p+"img/user-photo.debef687.jpg";const k=t=>((0,s.dD)("data-v-f03c6e3e"),t=t(),(0,s.Cn)(),t),E={class:"buttons"},S=k((()=>(0,s._)("h2",null,"Добро пожаловать,",-1))),Z=k((()=>(0,s._)("img",{src:O,alt:"photo"},null,-1)));function L(t,e,r,o,n,a){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",E,[(0,s._)("button",{type:"button",onClick:e[0]||(e[0]=(...e)=>t.logOut&&t.logOut(...e))},"Выйти из "+(0,y.zw)(t.getUser.email),1)]),S,(0,s._)("h2",null,(0,y.zw)(t.getUser.name),1),Z],64)}r(7658);var I=r(65),C=(0,s.aZ)({methods:{logOut(){this.$store.commit("resetState"),this.$router.push(ht.LOGIN)}},computed:(0,I.Se)(["getToken","getUser"]),beforeMount(){!this.getToken&&this.$router.push(ht.LOGIN)}});const D=(0,i.Z)(C,[["render",L],["__scopeId","data-v-f03c6e3e"]]);var j=D,U={name:"HomeView",components:{LayoutPage:b,UserInfo:j}};const M=(0,i.Z)(U,[["render",l]]);var T=M;const A={class:"login-page"};function P(t,e,r,o,n,a){const i=(0,s.up)("LoginForm");return(0,s.wg)(),(0,s.iD)("div",A,[(0,s.Wm)(i)])}const F=t=>((0,s.dD)("data-v-cf0cc10a"),t=t(),(0,s.Cn)(),t),$={class:"form"},q=F((()=>(0,s._)("h2",null,"Аутентификация",-1))),H={className:"field"},x=F((()=>(0,s._)("label",{htmlFor:"email"},"Введите email",-1))),G={className:"field"},N=F((()=>(0,s._)("label",{htmlFor:"password"},"Введите пароль",-1))),R=["disabled"],V={class:"notice"},W={key:0,class:"error"},z={key:1,class:"error"};function Y(t,e,r,n,a,i){const u=(0,s.up)("LoaderApp");return(0,s.wg)(),(0,s.iD)("div",$,["loading"===t.getStatus?((0,s.wg)(),(0,s.j4)(u,{key:0})):(0,s.kq)("",!0),q,(0,s._)("form",{action:"#",onSubmit:e[2]||(e[2]=(0,o.iM)(((...e)=>t.sendForm&&t.sendForm(...e)),["prevent"]))},[(0,s._)("div",H,[x,(0,s.wy)((0,s._)("input",{type:"text",id:"email",placeholder:"ivanov@yandex.by","onUpdate:modelValue":e[0]||(e[0]=e=>t.email=e),class:(0,y.C_)({"border-red":t.emailError})},null,2),[[o.nr,t.email]]),(0,s._)("div",{class:(0,y.C_)([{hide:!t.emailError},"error"])}," Введите корректный email! ",2)]),(0,s._)("div",G,[N,(0,s.wy)((0,s._)("input",{type:"password",id:"password",placeholder:"Введите пароль!","onUpdate:modelValue":e[1]||(e[1]=e=>t.password=e),class:(0,y.C_)({"border-red":t.passwordError})},null,2),[[o.nr,t.password]]),(0,s._)("div",{class:(0,y.C_)([{hide:!t.passwordError},"error"])}," Пароль от 6 до 10 символов ",2)]),(0,s._)("button",{disabled:"loading"===t.getStatus,type:"submit"},"Sign in",8,R)],32),(0,s._)("div",V,["401"===t.getStatus?((0,s.wg)(),(0,s.iD)("div",W," The email address or password is incorrect. ")):"400"===t.getStatus?((0,s.wg)(),(0,s.iD)("div",z,"Server error!")):(0,s.kq)("",!0)])])}const B=t=>((0,s.dD)("data-v-0659e42b"),t=t(),(0,s.Cn)(),t),J={class:"wrapper"},K=B((()=>(0,s._)("div",{class:"lds-ring"},[(0,s._)("div"),(0,s._)("div"),(0,s._)("div"),(0,s._)("div")],-1))),Q=[K];function X(t,e){return(0,s.wg)(),(0,s.iD)("div",J,Q)}const tt={},et=(0,i.Z)(tt,[["render",X],["__scopeId","data-v-0659e42b"]]);var rt=et,ot=(0,s.aZ)({components:{LoaderApp:rt},computed:(0,I.Se)(["getStatus","getToken"]),data(){return{email:"",password:"",emailError:!1,passwordError:!1}},beforeMount(){this.getToken&&this.$router.push(ht.HOME)},methods:{validate(){/^[A-Z0-9._%+-]+@[A-Z0-9-]+\.[A-Z]{2,4}$/i.test(this.email.trim())?this.emailError=!1:this.emailError=!0,this.password.length<6||this.password.length>10?this.passwordError=!0:this.passwordError=!1},sendForm(){this.validate(),this.passwordError||this.emailError||(this.$store.commit("addLoading"),this.$store.dispatch("userAuth",{email:this.email,password:this.password}),this.email="",this.password="")}}});const st=(0,i.Z)(ot,[["render",Y],["__scopeId","data-v-cf0cc10a"]]);var nt=st,at=(0,s.aZ)({components:{LoginForm:nt}});const it=(0,i.Z)(at,[["render",P],["__scopeId","data-v-2f33f7a8"]]);var ut=it;const dt=t=>((0,s.dD)("data-v-11f00240"),t=t(),(0,s.Cn)(),t),ct=dt((()=>(0,s._)("h2",null,"Страница не найдена!",-1)));function lt(t,e,r,o,n,a){const i=(0,s.up)("layout-page");return(0,s.wg)(),(0,s.j4)(i,null,{default:(0,s.w5)((()=>[ct])),_:1})}var pt=(0,s.aZ)({components:{LayoutPage:b}});const ft=(0,i.Z)(pt,[["render",lt],["__scopeId","data-v-11f00240"]]);var ht,vt=ft;(function(t){t["HOME"]="/",t["LOGIN"]="/login",t["PAGE404"]="/:pathMatch(.*)*"})(ht||(ht={}));const mt=[{path:ht.HOME,name:"home",component:T},{path:ht.LOGIN,name:"login",component:ut},{path:ht.PAGE404,name:"not-found",component:vt}],gt=(0,c.p7)({history:(0,c.PO)("/"),routes:mt});var wt=gt,_t=r(70);const bt=_t.ZP.create({baseURL:"http://localhost:5000/"}),yt={user:{},statusRequest:"notSend"};var Ot={actions:{async userAuth(t,e){const{commit:r,getters:o}=t;try{const t=await bt.post("/api/users",e);200===t.status&&(r("addUser",t.data),o.getToken&&wt.push(ht.HOME)),r("addStatus",t.status)}catch(s){r("addStatus",s.response.status)}}},mutations:{addUser(t,e){t.user=e},addStatus(t,e){t.statusRequest=""+e},addLoading(t){t.statusRequest="loading"},resetState(t){t.statusRequest="notSend",t.user={}}},getters:{getStatus(t){return t.statusRequest},getUser(t){return t.user},getToken(t){return t.user.token}},state:()=>({user:yt})};const kt=(0,I.MT)({modules:{user:Ot}});var Et=kt;const St=(0,o.ri)(d);St.use(Et).use(wt).mount("#app")}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,r),n.exports}r.m=t,function(){var t=[];r.O=function(e,o,s,n){if(!o){var a=1/0;for(c=0;c<t.length;c++){o=t[c][0],s=t[c][1],n=t[c][2];for(var i=!0,u=0;u<o.length;u++)(!1&n||a>=n)&&Object.keys(r.O).every((function(t){return r.O[t](o[u])}))?o.splice(u--,1):(i=!1,n<a&&(a=n));if(i){t.splice(c--,1);var d=s();void 0!==d&&(e=d)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[o,s,n]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.p="/"}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,n,a=o[0],i=o[1],u=o[2],d=0;if(a.some((function(e){return 0!==t[e]}))){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(u)var c=u(r)}for(e&&e(o);d<a.length;d++)n=a[d],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(c)},o=self["webpackChunkuprock"]=self["webpackChunkuprock"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(1731)}));o=r.O(o)})();
//# sourceMappingURL=app.8c60ec2f.js.map